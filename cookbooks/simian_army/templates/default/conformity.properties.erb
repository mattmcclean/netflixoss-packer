#
## Janitor Monkey Configuration File
#
## Dynamically generated by Chef on <%= node['fqdn'] %>
##
## Local modifications will be overwritten by Chef.
##

simianarmy.conformity.enabled=<%= node['simian_army']['conformity']['enabled'] ? 'true' : 'false' %>
simianarmy.conformity.leashed=<%= node['simian_army']['conformity']['leashed'] ? 'true' : 'false' %>

simianarmy.scheduler.frequency = <%= node['simian_army']['scheduler']['frequency'] %>
simianarmy.scheduler.frequencyUnit = <%= node['simian_army']['scheduler']['frequencyUnit'] %>
simianarmy.scheduler.threads = <%= node['simian_army']['scheduler']['threads'] %>

simianarmy.calendar.openHour = <%= node['simian_army']['conformity']['calendar']['openHour'] %>
simianarmy.calendar.closeHour = <%= node['simian_army']['conformity']['calendar']['closeHour'] %>
simianarmy.calendar.timezone = <%= node['simian_army']['calendar']['timezone'] %>

simianarmy.conformity.notification.openHour = <%= node['simian_army']['conformity']['calendar']['openHour'] %>
simianarmy.conformity.notification.closeHour = <%= node['simian_army']['conformity']['calendar']['closeHour'] %>

simianarmy.conformity.sdb.domain=<%= node['simian_army']['conformity']['sdb_domain'] %>
simianarmy.conformity.notification.sourceEmail=<%= node['simian_army']['conformity']['notification']['sourceEmail'] %>
simianarmy.conformity.notification.defaultEmail=<%= node['simian_army']['conformity']['notification']['defaultEmail'] %>
simianarmy.conformity.summaryEmail.to=<%= node['simian_army']['conformity']['summary']['emailTo'] %>
simianarmy.conformity.Eureka.enabled = false

simianarmy.conformity.rule.SameZonesInElbAndAsg.enabled=<%= node['simian_army']['conformity']['rule']['SameZonesInElbAndAsg']['enabled'] ? 'true' : 'false' %>

simianarmy.conformity.rule.InstanceInSecurityGroup.enabled=<%= node['simian_army']['conformity']['rule']['InstanceInSecurityGroup']['enabled'] ? 'true' : 'false' %>
simianarmy.conformity.rule.InstanceInSecurityGroup.requiredSecurityGroups=<%= node['simian_army']['conformity']['rule']['InstanceInSecurityGroup']['requiredSecurityGroups'] %>

simianarmy.conformity.rule.InstanceTooOld.enabled=<%= node['simian_army']['conformity']['rule']['InstanceTooOld']['enabled'] ? 'true' : 'false' %>
simianarmy.conformity.rule.InstanceTooOld.instanceAgeThreshold=<%= node['simian_army']['conformity']['rule']['InstanceTooOld']['instanceAgeThreshold'] %>

simianarmy.conformity.rule.InstanceInVPC.enabled=<%= node['simian_army']['conformity']['rule']['InstanceInVPC']['enabled'] ? 'true' : 'false' %>
simianarmy.conformity.rule.InstanceHasStatusUrl.enabled=<%= node['simian_army']['conformity']['rule']['InstanceHasStatusUrl']['enabled'] ? 'true' : 'false' %>
simianarmy.conformity.rule.InstanceHasHealthCheckUrl.enabled=<%= node['simian_army']['conformity']['rule']['InstanceHasHealthCheckUrl']['enabled'] ? 'true' : 'false' %>

<% if !node['simian_army']['conformity']['clusters'].nil? %>
<% node['simian_army']['conformity']['clusters'].each do |cluster| %>
simianarmy.conformity.cluster.<%= cluster['name'] %>.ownerEmail=<%= cluster['ownerEmail'] %>
simianarmy.conformity.cluster.<%= cluster['name'] %>.excludedRules=<%= cluster['excludedRules'] %>
simianarmy.conformity.cluster.<%= cluster['name'] %>.optedOut=<%= cluster['optedOut'] ? 'true' : 'false' %>
<% end %>
<% end %>
simianarmy.conformity.cluster.SoloInstances.optedOut=<%= node['simian_army']['conformity']['rule']['CheckSoloInstances']['enabled'] ? 'true' : 'false' %>
